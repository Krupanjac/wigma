<!-- Wigma — Figma-like Design Engine Shell -->
<div class="flex flex-col h-screen bg-zinc-900 text-white overflow-hidden select-none">
  <!-- Menu Bar -->
  <app-menu-bar class="shrink-0" />

  <!-- Main Workspace -->
  <div class="relative flex-1 min-h-0 overflow-hidden">
    <!-- Canvas always fills the workspace (sidebars overlay it) -->
    <app-canvas class="absolute inset-0" [engine]="engine" />

    <!-- Floating tools dock -->
    <app-toolbar class="absolute bottom-3 left-1/2 -translate-x-1/2 z-[80]" />

    <!-- Pages sidebar overlay (resizable) -->
    <div
      class="absolute inset-y-0 left-0 z-20 overflow-hidden"
      [style.width.px]="pagesCollapsed() ? 0 : pagesWidth()"
    >
      @if (!pagesCollapsed()) {
        <div class="h-full w-full border-r border-zinc-800">
          <app-layers-panel class="h-full w-full" [engine]="engine" />
        </div>
      }
    </div>

    <!-- Pages splitter overlay -->
    <div
      class="absolute inset-y-0 z-30 w-2 cursor-col-resize bg-transparent hover:bg-zinc-800/40"
      [style.left.px]="pagesCollapsed() ? 0 : pagesWidth()"
      (pointerdown)="startResize('pages', $event)"
      (dblclick)="togglePages()"
      title="Drag to resize • Double-click to toggle"
    ></div>

    <!-- Properties splitter overlay -->
    <div
      class="absolute inset-y-0 z-30 w-2 cursor-col-resize bg-transparent hover:bg-zinc-800/40"
      [style.right.px]="propertiesCollapsed() ? 0 : propertiesWidth()"
      (pointerdown)="startResize('properties', $event)"
      (dblclick)="toggleProperties()"
      title="Drag to resize • Double-click to toggle"
    ></div>

    <!-- Properties sidebar overlay (resizable) -->
    <div
      class="absolute inset-y-0 right-0 z-20 overflow-hidden"
      [style.width.px]="propertiesCollapsed() ? 0 : propertiesWidth()"
    >
      @if (!propertiesCollapsed()) {
        <div class="h-full w-full border-l border-zinc-800">
          <app-properties-panel class="h-full w-full" [engine]="engine" />
        </div>
      }
    </div>
  </div>

</div>

<!-- Context Menu (portal, positioned absolutely) -->
<app-context-menu />
